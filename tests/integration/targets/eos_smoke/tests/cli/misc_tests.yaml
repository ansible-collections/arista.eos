---
- ansible.builtin.debug:
    msg: "START cli/misc_tests.yaml on connection={{ ansible_connection }}"

# test become and unbecome
- block:
    - name: command with privilege 15 does not require become
      arista.eos.eos_command:
        commands: show running-config
      become: false
      register: result

    - ansible.builtin.assert:
        that:
          - result.changed == false
          - result.stdout is defined
        fail_msg: "Command should have succeeded for privilege 15 user, but it failed."

    - name: command that doesn't require become
      arista.eos.eos_command:
        commands: show uptime
      become: false
